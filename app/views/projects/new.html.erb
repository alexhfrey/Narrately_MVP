<%= stylesheet_link_tag "bootstrap.css" %>

<script type = "text/javascript">
function setValue(button, target) {

$(target).val(button.attr('name'));
button.closest('p').find('.btn-primary').removeClass('btn-primary');
button.addClass('btn-primary');

return false;
}

</script>



<%= render 'shared/error_messages' %>

<script type="text/javascript">
var queueBytesLoaded = 0;
var queueBytesTotal = 0;
var myQueue = null;

var queueChangeHandler = function(queue){
	// alert('Uploading Started');
	myQueue = queue;
	// console.log("COLLECTION CHANGE!");
	var list = document.getElementById('file_todo_list');
	// Clear out the old
	while (list.hasChildNodes()){list.removeChild(list.firstChild);}
	// Add the new
	for (i=0;i<queue.files.length;i++)
	{
		addFileToTodoList(queue.files[i].name, queue.files[i].size, i);
	}
};

var uploadingStartHandler = function(){
	queueBytesTotal = 0;
	queueBytesLoaded = 0;
	for (i=0;i<myQueue.files.length;i++)
	{
		queueBytesTotal += parseInt(myQueue.files[i].size);
	}
	document.getElementById('queue_size').innerHTML = readableBytes(queueBytesTotal);
};

var uploadingFinishHandler = function(){
	document.getElementById('overall').firstChild.style.width = '100%';
	document.getElementById('overall').firstChild.firstChild.innerHTML = '100%';
  alert('All files have been successfully uploaded');
};

var queueClearHandler = function(queue){
	document.getElementById('overall').firstChild.style.display = 'none';
	document.getElementById('overall').firstChild.style.width = '0%';
	document.getElementById('overall').firstChild.firstChild.innerHTML = '0%';
	var list = document.getElementById('file_done_list');
	while (list.hasChildNodes()){list.removeChild(list.firstChild);}
};

var addFileToDoneList = function(file_name, file_size){
	var list = document.getElementById('file_done_list');
	var li = document.createElement("li");
	li.innerHTML = 
		'<span class="progress"><span class="amount">100%</span></span>'+
		'<span class="file_name">'+file_name+'</span>'+
		'<span class="file_size">'+readableBytes(file_size)+'</span>';
	list.appendChild(li);
};

var addFileToTodoList = function(file_name, file_size, index){
	var list = document.getElementById('file_todo_list');
	var li = document.createElement("li");
	li.innerHTML = 
		'<span class="progress"><span class="amount">0%</span></span>'+
		'<span class="file_name">'+file_name+'</span>'+
		'<span class="file_size">'+readableBytes(file_size)+'</span>'+
		'<span class="delete" onclick="javascript:s3_swf_1_object.removeFileFromQueue('+index+');">Delete</span>';
	list.appendChild(li);
};

var progressHandler = function(progress_event){
	document.getElementById('file_todo_list').firstChild.children[3].style.display = 'none';
	var current_percentage = Math.floor((parseInt(progress_event.bytesLoaded)/parseInt(progress_event.bytesTotal))*100)+'%';
	document.getElementById('file_todo_list').firstChild.firstChild.style.display = 'block';
	document.getElementById('file_todo_list').firstChild.firstChild.style.width = current_percentage;
	document.getElementById('file_todo_list').firstChild.firstChild.firstChild.innerHTML = current_percentage;

	var overall_percentage = Math.floor(((queueBytesLoaded+parseInt(progress_event.bytesLoaded))/queueBytesTotal)*100)+'%';
	document.getElementById('overall').firstChild.style.display = 'block';
	document.getElementById('overall').firstChild.style.width = overall_percentage;
	document.getElementById('overall').firstChild.firstChild.innerHTML = overall_percentage;
};

var uploadCompleteHandler = function(upload_options,event){
	queueBytesLoaded += parseInt(upload_options.FileSize);
	addFileToDoneList(upload_options.FileName,upload_options.FileSize);
};

var readableBytes = function(bytes) {
	var s = ['bytes', 'kb', 'MB', 'GB', 'TB', 'PB'];
	var e = Math.floor(Math.log(bytes)/Math.log(1024));
	return (bytes/Math.pow(1024, Math.floor(e))).toFixed(2)+" "+s[e];
}
</script>



<div class="grid_11 singleleft">

<div class="createwelcome">
<div class="formwelcome">
<div class="bigtitle">We help creatives promote their work</div>
<div class="grid_top">
<p>Snowball is a  crowdmarketing platform which helps creatives leverage social media to promote their project. We're excited to help promote your project- tell us a little bit about it below.</p>
</div>
</div>
</div>

<div class="projectbox">
<fieldset class = "control-group">

<%= simple_form_for @project, :validate => true, :html => { :multipart => true } do |f| %>

	<h2>1. Project Details</h2>
	<p>Your project is unqiue- tell your fans why it's so special!</p>
	<hr>

	<%= f.hidden_field :user_id, :value => @user.id%>
	<p><%= f.hidden_field :tag1, :value => "Book" %> 
	<label>Project Category</label>
	<a class = "btn btn-primary" name = "Book"  onClick="setValue($(this), '#project_tag1')">Book</a>
	<a class = "btn"  name = "Fitness" onClick="setValue($(this), '#project_tag1')">Fitness</a>
	<a class = "btn"  name = "Music" onClick="setValue($(this), '#project_tag1')">Music</a>
	<a class = "btn"  name = "Art" onClick="setValue($(this), '#project_tag1')">Art</a>
	<a class = "btn"  name = "Food" onClick ="setValue($(this), '#project_tag1')">Food</a>
	<a class = "btn" name = "Event" onClick ="setValue($(this), '#project_tag1')">Event</a>
	<span class = "help-inline">Tip: Pick the category that best fits what you're promoting.</span> </p>
	

	    
	
   <p> <%= f.input :project_title, :hint => "Tip: Choose a catchy and descriptive title between 5-100 characters." , :label => "Project name",  :input_html => { :class => 'text'} %> </p>
   <p><%= f.input :description, :hint => "Tip: Explain what your project is about. Be interesting give your fans an insight into what you've been working on. Between 50-1000 characters." %> </p>   
 	<p><%= f.input :project_image, :hint => "Tip: Ideal dimensions: 600px x 400px. Jpeg and PNG accepted." , :validate => false	%> </p>
      <%=raw s3_swf_upload_tag %>
	<input type="submit" id="StartButton" value="Start Uploading" onclick="s3_swf_1_object.startUploading();" /> 
	  <div id="overall"><span class="progress"><span class="amount">10%</span></span><span id="status"></span></div>
   
<h2>2. Reward Details</h2>
<p>This is the reward your fans will receive when they share your work- make it something they want!</p>
<hr>
<p> 
<%= f.hidden_field :promotion_type, :value => "Coupon" %>
	<label>Promotion Type</label>
	<a class = "btn btn-primary" name = "Coupon"  onClick="setValue($(this), '#project_promotion_type')">Coupon</a>
	<a class = "btn"  name = "E-book" onClick="setValue($(this), '#project_promotion_type')">E-book</a>
	<a class = "btn"  name = "Special Offer" onClick="setValue($(this), '#project_promotion_type')">Special Offer</a>
	
	<span class = "help-inline">Tip: Pick the category that best fits the reward you are offerring.</span> </p>
	
 <p> <%= f.input :promotion_description, :hint => "Enter a short, under 50 character description of what you are offering" %></p>
 <p><%= f.input :promotion_limit, :hint => "Tip: The number of rewards you want to give away.", :label => "Reward Limit" %> </p>
 <p> <%= f.input :output_file, :hint => "Tip: Eligible fans will be able to download this. Examples include ebook and digital coupon. Please use PDF and epub files." , :label => "Reward File" %> </p><br>
 

<h2>3. Purchase Details </h2>
<p>Once your reward limit is reached, fans will be able to purchase your product. If you sell the product, include the purchase link here.</p>
<hr>
<p><%= f.input :purchase_link, :hint => "Tip: Enter the full address of a site selling your product" %></p>
 <p> <%= f.submit :class => "btn btn-success btn-large"	 %> </p>

 <% end %>

    

</div>
</div>



<div class="grid_4 righthome">
<div class="categorybox">
<div class="howitworkscreate">
<h6>How it Works</h6>
<br />
<div class="grid_4">
<b>Step 1: Submit</b>
<br />
<p>Complete the submission form. It typically takes under 2 minutes. </p>
<b>Step 2: Review</b>
<br />
<p>
Once submitted, the team here at Snowball will review the project and offer any sugesstions. We'll review it as soon as possible- typically under 24 hours.</p>
<b>Step 3: Publish</b>
<br />
<p>Once approved, the project will be published on the site. At that point you'll be able to share the project with your fans. Of cousre, Snowball will tweet it like mad.</p>
<br />
Other questions? Take a look at our <a href="#">FAQs page.</a>
<br />
<br />
</div>
</div>
</div>
</div>


