<script src="https://ajax.googleapis.com/ajax/libs/prototype/1.7.0.0/prototype.js" type="text/javascript"></script>

	<script src="https://ajax.googleapis.com/ajax/libs/scriptaculous/1.9.0/scriptaculous.js" type="text/javascript"></script>
	<%= javascript_include_tag "jsCropperUI-1.2.2/cropper/cropper.js" %>
	
<script type="text/javascript" charset="utf-8">



		// setup the callback function
		function onEndCrop( coords, dimensions ) {
			$( 'x1' ).value = coords.x1;
			$( 'y1' ).value = coords.y1;
			$( 'x2' ).value = coords.x2;
			$( 'y2' ).value = coords.y2;
			$( 'width' ).value = dimensions.width;
			$( 'height' ).value = dimensions.height;
		}
		// basic example
		Event.observe( 
			window, 
			'load', 
			function() { 
				new Cropper.ImgWithPreview( 
					'testImage',
					{
						minWidth: 248, 
						minHeight: 162,
						ratioDim: { x: 248, y: 162},
						onEndCrop: onEndCrop, 
						previewWrap: 'previewArea'
					}
				);
			}
		);

	</script>

<div class="grid_16">
</div>

<div class="grid_11 singleleft">
<div class="discoverbox">
<div class="bigtitle">Crop Your Project Image</div>
<div class="lines"></div>

	<style type="text/css">

		#testWrap {
			float: left;
			margin: 10px 5px 5px 20px; /* Just while testing, to make sure we return the correct positions for the image & not the window */
		}
		
		.testwrap h3 {
		float: left
		font-size: 20px; 
		}
		
		#previewArea {

			margin: 10px; 0 0 20px;
			overflow:hidden;
			float: left;
			width: 265px;
			height: 320px;
		}
		.previewArea {

			margin: 10px; 0 0 0px;
			overflow:hidden;
			float: left;
			width:265px;
			height: 320px;
		}
		
		.previewArea h3 {
		text-align: left
		font-size: 20px; 
		}
		
		.previewArea img {
			max-width:none;
		}	
		#results {
			clear: both;
		}

	</style>
	

	<div id="testWrap" >
	<%= image_tag "mainimg.png", :id => "testImage" %>
	</div>
	
	<div id="previewArea" class ="previewArea"></div>
	<div id ="results" style = "padding-bottom: 20 px;">

	<%= form_for @project, :url => {:action => 'update'} do |f|%>
	<%= f.submit "Update", :class => "btn btn-success btn-large"%>

   <%= f.hidden_field :x1, :name => 'x1', :id=> 'x1' %>
    <%= f.hidden_field :y1, :name => 'y1', :id => 'y1' %>
	 <%= f.hidden_field :x2, :name => 'x2', :id => 'x2' %>
	  <%= f.hidden_field :y2, :name => 'y2', :id => 'y2' %>
	   <%= f.hidden_field :height, :name => 'height', :id => 'height' %>
	    <%= f.hidden_field :width, :name => 'width', :id => 'width' %>

 
  
<% end %>
</div>
</div>
</div>

